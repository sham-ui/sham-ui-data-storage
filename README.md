# sham-ui-data-storage

[![Build Status](https://travis-ci.com/sham-ui/sham-ui-data-storage.svg?branch=master)](https://travis-ci.com/sham-ui/sham-ui-data-storage)
[![npm version](https://badge.fury.io/js/sham-ui-data-storage.svg)](https://badge.fury.io/js/sham-ui-data-storage)
[![MIT Licence](https://badges.frapsoft.com/os/mit/mit.svg?v=103)](https://opensource.org/licenses/mit-license.php)

 Data storage for sham-ui

## Install

```bash
# npm
npm install -D sham-ui-data-storage
```

```bash
# yarn
yarn add sham-ui-data-storage --dev
```

## API

<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

#### Table of Contents

-   [createStorage](#createstorage)
    -   [Parameters](#parameters)
    -   [Examples](#examples)
-   [CreateStorageOptions](#createstorageoptions)
    -   [Properties](#properties)
-   [useStorage](#usestorage)
    -   [Parameters](#parameters-1)
    -   [Examples](#examples-1)
-   [Storage](#storage)
    -   [addWatcher](#addwatcher)
        -   [Parameters](#parameters-2)
    -   [removeWatcher](#removewatcher)
        -   [Parameters](#parameters-3)
    -   [reset](#reset)
    -   [sync](#sync)

### createStorage

Create a new storage object.

#### Parameters

-   `fieldsWithDefault` **[Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)** Fields of storage
-   `options` **[CreateStorageOptions](#createstorageoptions)?** Extra options for storage (optional, default `{}`)

#### Examples

```javascript
import createStorage from 'sham-ui-data-storage';
export const { storage, useStorage } = createStorage( {
   name: '',
   email: '',
   sessionValidated: false,
   isAuthenticated: false
}, { DI: 'session:storage' } );
```

Returns **{storage: [Storage](#storage), useStorage: (function ())}** 

### CreateStorageOptions

Options for `createStorage`

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

#### Properties

-   `DI` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Registry storage in DI with this key. By default not specified.
-   `LIFO` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Use LIFO (last input first output) for storage subscribers. By default false
-   `sync` **[boolean](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Boolean)** Disable async run watchers callback. Callbacks will run only after call `sync` storage method. By default false

### useStorage

Decorator for component

#### Parameters

-   `storageAlias` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Name of classProperty for access to storage fields

#### Examples

```javascript
<template>
  <span class="logged-name">
    {{sessionData.name}}
  </span>
</template>

<script>
  import { useStorage } from '../../../storages/session';

  class Profile extends Template {

  }

  export default useStorage( 'sessionData' )( Profile );
</script>
```

Returns **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** 

### Storage

Type: [Object](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object)

#### addWatcher

Add watcher for field

##### Parameters

-   `field` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Name of field
-   `cb` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Callback

#### removeWatcher

Remove watcher for field

##### Parameters

-   `field` **[string](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/String)** Name of field
-   `cb` **[Function](https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function)** Callback

#### reset

Remove all watchers & reset storage field to default values

#### sync

Run all deferred subscribers immediate
